"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[227],{227:(e,n,s)=>{s.r(n),s.d(n,{default:()=>f});var r=s(791),t=s(848),c=s(301),a=s(938),o=s(184);const l=e=>{const{center:n,zoom:s}=e;(0,r.useEffect)((()=>{const r=new window.google.maps.Map(t.current,{center:n,zoom:s});new window.google.maps.Marker({position:e.center,map:r})}),[e.center,e.zoom,n,s]);const t=(0,r.useRef)();return(0,o.jsx)("div",{ref:t,className:"map ".concat(e.className),style:e.style})};var i=s(573),d=s(822),h=s(784),m=s(35);function u(e){let{place:n,onDelete:s}=e;const u=(0,r.useContext)(h.V),{isLoading:x,error:j,sendRequest:f,clearError:p}=(0,m.x)(),[C,g]=(0,r.useState)(!1),[E,v]=(0,r.useState)(!1),w=()=>g(!1);function N(){v(!1)}return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.Z,{error:j,onClear:p}),(0,o.jsx)(a.Z,{show:C,onCancel:w,header:n.address,contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",footer:(0,o.jsx)(c.Z,{onClick:w,children:"CLOSE"}),children:(0,o.jsx)("div",{className:"map-container",children:(0,o.jsx)(l,{center:n.location,zoom:16})})}),(0,o.jsx)(a.Z,{show:E,onCancel:N,header:"Are you sure?",footerClass:"place-item__modal-actions",footer:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.Z,{reverse:!0,onClick:N,children:"CANCEL"}),(0,o.jsx)(c.Z,{danger:!0,onClick:async function(){v(!1),await f("".concat("https://mern-project-731ce5afc606.herokuapp.com/api","/places/").concat(n.id),"DELETE",null,{Authorization:"Bearer "+u.token}),s(n.id)},children:"DELETE"})]}),children:(0,o.jsx)("p",{children:"Do you want to proceed and delete this place? Please note that it can't be undone thereafter."})}),(0,o.jsx)("li",{className:"place-item",children:(0,o.jsxs)(t.Z,{className:"place-item__content",children:[x&&(0,o.jsx)(d.Z,{asOverlay:!0}),(0,o.jsx)("div",{className:"place-item__image",children:(0,o.jsx)("img",{src:n.image,alt:n.title})}),(0,o.jsxs)("div",{className:"place-item__info",children:[(0,o.jsx)("h2",{children:n.title}),(0,o.jsx)("h3",{children:n.address}),(0,o.jsx)("p",{children:n.description})]}),(0,o.jsxs)("div",{className:"place-item__actions",children:[(0,o.jsx)(c.Z,{inverse:!0,onClick:()=>g(!0),children:"VIEW ON MAP"}),u.userId===n.creator&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.Z,{to:"/places/".concat(n.id),children:"EDIT"}),(0,o.jsx)(c.Z,{danger:!0,onClick:function(){v(!0)},children:"DELETE"})]})]})]})})]})}function x(e){return 0===e.items.length?(0,o.jsx)("div",{className:"place-list center",children:(0,o.jsxs)(t.Z,{children:[(0,o.jsx)("h2",{children:"No places found. Maybe Create one?"}),(0,o.jsx)(c.Z,{to:"/places/new",children:"Share Place"})]})}):(0,o.jsx)("ul",{className:"place-list",children:e.items.map((n=>(0,o.jsx)(u,{place:n,onDelete:e.onDeletePlace},n.id)))})}var j=s(25);const f=()=>{const e=(0,j.UO)().userId,{isLoading:n,error:s,sendRequest:t,clearError:c}=(0,m.x)(),[a,l]=(0,r.useState)();return(0,r.useEffect)((()=>{!async function(){try{const n=await t("".concat("https://mern-project-731ce5afc606.herokuapp.com/api","/places/user/").concat(e));l(n.places)}catch(n){}}()}),[t,e]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.Z,{error:s,onClear:c}),n&&(0,o.jsx)("div",{className:"center",children:(0,o.jsx)(d.Z,{})}),!n&&a&&(0,o.jsx)(x,{items:a,onDeletePlace:function(e){l((n=>n.filter((n=>n.id!==e))))}})]})}},848:(e,n,s)=>{s.d(n,{Z:()=>t});s(791);var r=s(184);const t=e=>(0,r.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})},573:(e,n,s)=>{s.d(n,{Z:()=>a});s(791);var r=s(938),t=s(301),c=s(184);const a=e=>(0,c.jsx)(r.Z,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:(0,c.jsx)(t.Z,{onClick:e.onClear,children:"Okay"}),children:(0,c.jsx)("p",{children:e.error})})},938:(e,n,s)=>{s.d(n,{Z:()=>l});var r=s(164),t=s(549),c=s(327),a=s(184);const o=e=>{const n=(0,a.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[(0,a.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:(0,a.jsx)("h2",{children:e.header})}),(0,a.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:e=>e.preventDefault(),children:[(0,a.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),(0,a.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return r.createPortal(n,document.getElementById("modal-hook"))};function l(e){return(0,a.jsxs)(a.Fragment,{children:[e.show&&(0,a.jsx)(c.Z,{onClick:e.onCancel}),(0,a.jsx)(t.Z,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:(0,a.jsx)(o,{...e})})]})}},35:(e,n,s)=>{s.d(n,{x:()=>t});var r=s(791);function t(){const[e,n]=(0,r.useState)(!1),[s,t]=(0,r.useState)(null),c=(0,r.useRef)([]),a=(0,r.useCallback)((async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n(!0);const l=new AbortController;c.current.push(l);try{const s=await fetch(e,{method:r,body:a,headers:o,signal:l.signal}),t=await s.json();if(c.current=c.current.filter((e=>e!==l)),!s.ok)throw new Error(t.message);return n(!1),t}catch(i){if("The user aborted a request."!==i.message)throw t(i.message),n(!1),s}}),[s]);return(0,r.useEffect)((()=>()=>{try{c.current.forEach((e=>e.abort()))}catch(e){}}),[]),{isLoading:e,error:s,sendRequest:a,clearError:function(){t(null)}}}}}]);
//# sourceMappingURL=227.3e4a8320.chunk.js.map